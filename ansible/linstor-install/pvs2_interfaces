# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

iface eno1 inet manual

auto enp23s0
iface enp23s0 inet manual
	mtu 9000

iface enp23s0d1 inet manual

auto enp23s0.10
iface enp23s0.10 inet static
	address 192.168.10.55/24
	mtu 9000

auto enp23s0.20
iface enp23s0.20 inet static
	address 192.168.20.55/24
	mtu 9000
	post-up ip link set dev enp23s0.20 type vlan egress 0:3
	post-up  ip route add 192.168.30.0/24 via 192.168.20.1 dev enp23s0.20
	pre-down ip route del 192.168.30.0/24 via 192.168.20.1 dev enp23s0.20 || true
### static routing for eth0 that connects to the VLAN ###

auto vmbr0
iface vmbr0 inet static
	address 192.168.1.55/24
	gateway 192.168.1.1
	bridge-ports eno1
	bridge-stp off
	bridge-fd 0

source /etc/network/interfaces.d/*
